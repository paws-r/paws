# This file is generated by make.paws. Please do not edit here.
#' @importFrom paws.common get_config new_operation new_request send_request
#' @include marketplacemetering_service.R
NULL

#' The CustomerIdentifier parameter is scheduled for deprecation
#'
#' @description
#' The `CustomerIdentifier` parameter is scheduled for deprecation. Use
#' `CustomerAWSAccountID` instead.
#' 
#' These parameters are mutually exclusive. You can't specify both
#' `CustomerIdentifier` and `CustomerAWSAccountID` in the same request.
#' 
#' To post metering records for customers, SaaS applications call
#' [`batch_meter_usage`][marketplacemetering_batch_meter_usage], which is
#' used for metering SaaS flexible consumption pricing (FCP). Identical
#' requests are idempotent and can be retried with the same records or a
#' subset of records. Each
#' [`batch_meter_usage`][marketplacemetering_batch_meter_usage] request is
#' for only one product. If you want to meter usage for multiple products,
#' you must make multiple
#' [`batch_meter_usage`][marketplacemetering_batch_meter_usage] calls.
#' 
#' Usage records should be submitted in quick succession following a
#' recorded event. Usage records aren't accepted 6 hours or more after an
#' event.
#' 
#' [`batch_meter_usage`][marketplacemetering_batch_meter_usage] can process
#' up to 25 `UsageRecords` at a time, and each request must be less than 1
#' MB in size. Optionally, you can have multiple usage allocations for
#' usage data that's split into buckets according to predefined tags.
#' 
#' [`batch_meter_usage`][marketplacemetering_batch_meter_usage] returns a
#' list of `UsageRecordResult` objects, which have each `UsageRecord`. It
#' also returns a list of `UnprocessedRecords`, which indicate errors on
#' the service side that should be retried.
#' 
#' For Amazon Web Services Regions that support
#' [`batch_meter_usage`][marketplacemetering_batch_meter_usage], see
#' [BatchMeterUsage Region
#' support](https://docs.aws.amazon.com/marketplace/latest/APIReference/metering-regions.html#batchmeterusage-region-support).
#' 
#' For an example of
#' [`batch_meter_usage`][marketplacemetering_batch_meter_usage], see
#' [BatchMeterUsage code
#' example](https://docs.aws.amazon.com/marketplace/latest/userguide/saas-code-examples.html#saas-batchmeterusage-example)
#' in the *Amazon Web Services Marketplace Seller Guide*.
#'
#' @usage
#' marketplacemetering_batch_meter_usage(UsageRecords, ProductCode)
#'
#' @param UsageRecords &#91;required&#93; The set of `UsageRecords` to submit.
#' [`batch_meter_usage`][marketplacemetering_batch_meter_usage] accepts up
#' to 25 `UsageRecords` at a time.
#' @param ProductCode &#91;required&#93; Product code is used to uniquely identify a product in Amazon Web
#' Services Marketplace. The product code should be the same as the one
#' used during the publishing of a new product.
#'
#' @return
#' A list with the following syntax:
#' ```
#' list(
#'   Results = list(
#'     list(
#'       UsageRecord = list(
#'         Timestamp = as.POSIXct(
#'           "2015-01-01"
#'         ),
#'         CustomerIdentifier = "string",
#'         Dimension = "string",
#'         Quantity = 123,
#'         UsageAllocations = list(
#'           list(
#'             AllocatedUsageQuantity = 123,
#'             Tags = list(
#'               list(
#'                 Key = "string",
#'                 Value = "string"
#'               )
#'             )
#'           )
#'         ),
#'         CustomerAWSAccountId = "string"
#'       ),
#'       MeteringRecordId = "string",
#'       Status = "Success"|"CustomerNotSubscribed"|"DuplicateRecord"
#'     )
#'   ),
#'   UnprocessedRecords = list(
#'     list(
#'       Timestamp = as.POSIXct(
#'         "2015-01-01"
#'       ),
#'       CustomerIdentifier = "string",
#'       Dimension = "string",
#'       Quantity = 123,
#'       UsageAllocations = list(
#'         list(
#'           AllocatedUsageQuantity = 123,
#'           Tags = list(
#'             list(
#'               Key = "string",
#'               Value = "string"
#'             )
#'           )
#'         )
#'       ),
#'       CustomerAWSAccountId = "string"
#'     )
#'   )
#' )
#' ```
#'
#' @section Request syntax:
#' ```
#' svc$batch_meter_usage(
#'   UsageRecords = list(
#'     list(
#'       Timestamp = as.POSIXct(
#'         "2015-01-01"
#'       ),
#'       CustomerIdentifier = "string",
#'       Dimension = "string",
#'       Quantity = 123,
#'       UsageAllocations = list(
#'         list(
#'           AllocatedUsageQuantity = 123,
#'           Tags = list(
#'             list(
#'               Key = "string",
#'               Value = "string"
#'             )
#'           )
#'         )
#'       ),
#'       CustomerAWSAccountId = "string"
#'     )
#'   ),
#'   ProductCode = "string"
#' )
#' ```
#'
#' @keywords internal
#'
#' @rdname marketplacemetering_batch_meter_usage
#'
#' @aliases marketplacemetering_batch_meter_usage
marketplacemetering_batch_meter_usage <- function(UsageRecords, ProductCode) {
  op <- new_operation(
    name = "BatchMeterUsage",
    http_method = "POST",
    http_path = "/",
    host_prefix = "",
    paginator = list(),
    stream_api = FALSE
  )
  input <- .marketplacemetering$batch_meter_usage_input(UsageRecords = UsageRecords, ProductCode = ProductCode)
  output <- .marketplacemetering$batch_meter_usage_output()
  config <- get_config()
  svc <- .marketplacemetering$service(config, op)
  request <- new_request(svc, op, input, output)
  response <- send_request(request)
  return(response)
}
.marketplacemetering$operations$batch_meter_usage <- marketplacemetering_batch_meter_usage

#' API to emit metering records
#'
#' @description
#' API to emit metering records. For identical requests, the API is
#' idempotent and returns the metering record ID. This is used for metering
#' flexible consumption pricing (FCP) Amazon Machine Images (AMI) and
#' container products.
#' 
#' [`meter_usage`][marketplacemetering_meter_usage] is authenticated on the
#' buyer's Amazon Web Services account using credentials from the Amazon
#' EC2 instance, Amazon ECS task, or Amazon EKS pod.
#' 
#' [`meter_usage`][marketplacemetering_meter_usage] can optionally include
#' multiple usage allocations, to provide customers with usage data split
#' into buckets by tags that you define (or allow the customer to define).
#' 
#' Usage records are expected to be submitted as quickly as possible after
#' the event that is being recorded, and are not accepted more than 6 hours
#' after the event.
#' 
#' For Amazon Web Services Regions that support
#' [`meter_usage`][marketplacemetering_meter_usage], see [MeterUsage Region
#' support for Amazon
#' EC2](https://docs.aws.amazon.com/marketplace/latest/APIReference/metering-regions.html#meterusage-region-support-ec2)
#' and [MeterUsage Region support for Amazon ECS and Amazon
#' EKS](https://docs.aws.amazon.com/marketplace/latest/APIReference/metering-regions.html#meterusage-region-support-ecs-eks).
#'
#' @usage
#' marketplacemetering_meter_usage(ProductCode, Timestamp, UsageDimension,
#'   UsageQuantity, DryRun, UsageAllocations)
#'
#' @param ProductCode &#91;required&#93; Product code is used to uniquely identify a product in Amazon Web
#' Services Marketplace. The product code should be the same as the one
#' used during the publishing of a new product.
#' @param Timestamp &#91;required&#93; Timestamp, in UTC, for which the usage is being reported. Your
#' application can meter usage for up to six hours in the past. Make sure
#' the `timestamp` value is not before the start of the software usage.
#' @param UsageDimension &#91;required&#93; It will be one of the fcp dimension name provided during the publishing
#' of the product.
#' @param UsageQuantity Consumption value for the hour. Defaults to `0` if not specified.
#' @param DryRun Checks whether you have the permissions required for the action, but
#' does not make the request. If you have the permissions, the request
#' returns `DryRunOperation`; otherwise, it returns
#' `UnauthorizedException`. Defaults to `false` if not specified.
#' @param UsageAllocations The set of `UsageAllocations` to submit.
#' 
#' The sum of all `UsageAllocation` quantities must equal the
#' `UsageQuantity` of the [`meter_usage`][marketplacemetering_meter_usage]
#' request, and each `UsageAllocation` must have a unique set of tags
#' (include no tags).
#'
#' @return
#' A list with the following syntax:
#' ```
#' list(
#'   MeteringRecordId = "string"
#' )
#' ```
#'
#' @section Request syntax:
#' ```
#' svc$meter_usage(
#'   ProductCode = "string",
#'   Timestamp = as.POSIXct(
#'     "2015-01-01"
#'   ),
#'   UsageDimension = "string",
#'   UsageQuantity = 123,
#'   DryRun = TRUE|FALSE,
#'   UsageAllocations = list(
#'     list(
#'       AllocatedUsageQuantity = 123,
#'       Tags = list(
#'         list(
#'           Key = "string",
#'           Value = "string"
#'         )
#'       )
#'     )
#'   )
#' )
#' ```
#'
#' @keywords internal
#'
#' @rdname marketplacemetering_meter_usage
#'
#' @aliases marketplacemetering_meter_usage
marketplacemetering_meter_usage <- function(ProductCode, Timestamp, UsageDimension, UsageQuantity = NULL, DryRun = NULL, UsageAllocations = NULL) {
  op <- new_operation(
    name = "MeterUsage",
    http_method = "POST",
    http_path = "/",
    host_prefix = "",
    paginator = list(),
    stream_api = FALSE
  )
  input <- .marketplacemetering$meter_usage_input(ProductCode = ProductCode, Timestamp = Timestamp, UsageDimension = UsageDimension, UsageQuantity = UsageQuantity, DryRun = DryRun, UsageAllocations = UsageAllocations)
  output <- .marketplacemetering$meter_usage_output()
  config <- get_config()
  svc <- .marketplacemetering$service(config, op)
  request <- new_request(svc, op, input, output)
  response <- send_request(request)
  return(response)
}
.marketplacemetering$operations$meter_usage <- marketplacemetering_meter_usage

#' Paid container software products sold through Amazon Web Services
#' Marketplace must integrate with the Amazon Web Services Marketplace
#' Metering Service and call the RegisterUsage operation for software
#' entitlement and metering
#'
#' @description
#' Paid container software products sold through Amazon Web Services
#' Marketplace must integrate with the Amazon Web Services Marketplace
#' Metering Service and call the
#' [`register_usage`][marketplacemetering_register_usage] operation for
#' software entitlement and metering. Free and BYOL products for Amazon ECS
#' or Amazon EKS aren't required to call
#' [`register_usage`][marketplacemetering_register_usage], but you may
#' choose to do so if you would like to receive usage data in your seller
#' reports. The sections below explain the behavior of
#' [`register_usage`][marketplacemetering_register_usage].
#' [`register_usage`][marketplacemetering_register_usage] performs two
#' primary functions: metering and entitlement.
#' 
#' -   *Entitlement*:
#'     [`register_usage`][marketplacemetering_register_usage] allows you to
#'     verify that the customer running your paid software is subscribed to
#'     your product on Amazon Web Services Marketplace, enabling you to
#'     guard against unauthorized use. Your container image that integrates
#'     with [`register_usage`][marketplacemetering_register_usage] is only
#'     required to guard against unauthorized use at container startup, as
#'     such a `CustomerNotSubscribedException` or
#'     `PlatformNotSupportedException` will only be thrown on the initial
#'     call to [`register_usage`][marketplacemetering_register_usage].
#'     Subsequent calls from the same Amazon ECS task instance (e.g.
#'     task-id) or Amazon EKS pod will not throw a
#'     `CustomerNotSubscribedException`, even if the customer unsubscribes
#'     while the Amazon ECS task or Amazon EKS pod is still running.
#' 
#' -   *Metering*: [`register_usage`][marketplacemetering_register_usage]
#'     meters software use per ECS task, per hour, or per pod for Amazon
#'     EKS with usage prorated to the second. A minimum of 1 minute of
#'     usage applies to tasks that are short lived. For example, if a
#'     customer has a 10 node Amazon ECS or Amazon EKS cluster and a
#'     service configured as a Daemon Set, then Amazon ECS or Amazon EKS
#'     will launch a task on all 10 cluster nodes and the customer will be
#'     charged for 10 tasks. Software metering is handled by the Amazon Web
#'     Services Marketplace metering control plane—your software is not
#'     required to perform metering-specific actions other than to call
#'     [`register_usage`][marketplacemetering_register_usage] to commence
#'     metering. The Amazon Web Services Marketplace metering control plane
#'     will also bill customers for running ECS tasks and Amazon EKS pods,
#'     regardless of the customer's subscription state, which removes the
#'     need for your software to run entitlement checks at runtime. For
#'     containers, [`register_usage`][marketplacemetering_register_usage]
#'     should be called immediately at launch. If you don’t register the
#'     container within the first 6 hours of the launch, Amazon Web
#'     Services Marketplace Metering Service doesn’t provide any metering
#'     guarantees for previous months. Metering will continue, however, for
#'     the current month forward until the container ends.
#'     [`register_usage`][marketplacemetering_register_usage] is for
#'     metering paid hourly container products.
#' 
#'     For Amazon Web Services Regions that support
#'     [`register_usage`][marketplacemetering_register_usage], see
#'     [RegisterUsage Region
#'     support](https://docs.aws.amazon.com/marketplace/latest/APIReference/metering-regions.html#registerusage-region-support).
#'
#' @usage
#' marketplacemetering_register_usage(ProductCode, PublicKeyVersion, Nonce)
#'
#' @param ProductCode &#91;required&#93; Product code is used to uniquely identify a product in Amazon Web
#' Services Marketplace. The product code should be the same as the one
#' used during the publishing of a new product.
#' @param PublicKeyVersion &#91;required&#93; Public Key Version provided by Amazon Web Services Marketplace
#' @param Nonce (Optional) To scope down the registration to a specific running software
#' instance and guard against replay attacks.
#'
#' @return
#' A list with the following syntax:
#' ```
#' list(
#'   PublicKeyRotationTimestamp = as.POSIXct(
#'     "2015-01-01"
#'   ),
#'   Signature = "string"
#' )
#' ```
#'
#' @section Request syntax:
#' ```
#' svc$register_usage(
#'   ProductCode = "string",
#'   PublicKeyVersion = 123,
#'   Nonce = "string"
#' )
#' ```
#'
#' @keywords internal
#'
#' @rdname marketplacemetering_register_usage
#'
#' @aliases marketplacemetering_register_usage
marketplacemetering_register_usage <- function(ProductCode, PublicKeyVersion, Nonce = NULL) {
  op <- new_operation(
    name = "RegisterUsage",
    http_method = "POST",
    http_path = "/",
    host_prefix = "",
    paginator = list(),
    stream_api = FALSE
  )
  input <- .marketplacemetering$register_usage_input(ProductCode = ProductCode, PublicKeyVersion = PublicKeyVersion, Nonce = Nonce)
  output <- .marketplacemetering$register_usage_output()
  config <- get_config()
  svc <- .marketplacemetering$service(config, op)
  request <- new_request(svc, op, input, output)
  response <- send_request(request)
  return(response)
}
.marketplacemetering$operations$register_usage <- marketplacemetering_register_usage

#' ResolveCustomer is called by a SaaS application during the registration
#' process
#'
#' @description
#' [`resolve_customer`][marketplacemetering_resolve_customer] is called by
#' a SaaS application during the registration process. When a buyer visits
#' your website during the registration process, the buyer submits a
#' registration token through their browser. The registration token is
#' resolved through this API to obtain a `CustomerIdentifier` along with
#' the `CustomerAWSAccountId` and `ProductCode`.
#' 
#' To successfully resolve the token, the API must be called from the
#' account that was used to publish the SaaS application. For an example of
#' using [`resolve_customer`][marketplacemetering_resolve_customer], see
#' [ResolveCustomer code
#' example](https://docs.aws.amazon.com/marketplace/latest/userguide/saas-code-examples.html#saas-resolvecustomer-example)
#' in the *Amazon Web Services Marketplace Seller Guide*.
#' 
#' Permission is required for this operation. Your IAM role or user
#' performing this operation requires a policy to allow the
#' `aws-marketplace:ResolveCustomer` action. For more information, see
#' [Actions, resources, and condition keys for Amazon Web Services
#' Marketplace Metering
#' Service](https://docs.aws.amazon.com/service-authorization/latest/reference/list_awsmarketplacemeteringservice.html)
#' in the *Service Authorization Reference*.
#' 
#' For Amazon Web Services Regions that support
#' [`resolve_customer`][marketplacemetering_resolve_customer], see
#' [ResolveCustomer Region
#' support](https://docs.aws.amazon.com/marketplace/latest/APIReference/metering-regions.html#resolvecustomer-region-support).
#'
#' @usage
#' marketplacemetering_resolve_customer(RegistrationToken)
#'
#' @param RegistrationToken &#91;required&#93; When a buyer visits your website during the registration process, the
#' buyer submits a registration token through the browser. The registration
#' token is resolved to obtain a `CustomerIdentifier` along with the
#' `CustomerAWSAccountId` and `ProductCode`.
#'
#' @return
#' A list with the following syntax:
#' ```
#' list(
#'   CustomerIdentifier = "string",
#'   ProductCode = "string",
#'   CustomerAWSAccountId = "string"
#' )
#' ```
#'
#' @section Request syntax:
#' ```
#' svc$resolve_customer(
#'   RegistrationToken = "string"
#' )
#' ```
#'
#' @keywords internal
#'
#' @rdname marketplacemetering_resolve_customer
#'
#' @aliases marketplacemetering_resolve_customer
marketplacemetering_resolve_customer <- function(RegistrationToken) {
  op <- new_operation(
    name = "ResolveCustomer",
    http_method = "POST",
    http_path = "/",
    host_prefix = "",
    paginator = list(),
    stream_api = FALSE
  )
  input <- .marketplacemetering$resolve_customer_input(RegistrationToken = RegistrationToken)
  output <- .marketplacemetering$resolve_customer_output()
  config <- get_config()
  svc <- .marketplacemetering$service(config, op)
  request <- new_request(svc, op, input, output)
  response <- send_request(request)
  return(response)
}
.marketplacemetering$operations$resolve_customer <- marketplacemetering_resolve_customer
